<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Working Directory Structure &mdash; SeisFlows3  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="_static/sf3_globe_alpha.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Specfem2D workstation example" href="specfem2d_example.html" />
    <link rel="prev" title="Parameter File" href="parameter_file.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> SeisFlows3
            <img src="_static/sf3_globe_alpha_wide.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="start_here.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="citeme.html">Cite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Structure</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="command_line_tool.html">Commmand Line Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameter_file.html">Parameter File</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Working Directory Structure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#scratch">scratch/</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solver">solver/</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optimize">optimize/</a></li>
<li class="toctree-l3"><a class="reference internal" href="#evalfunc-evalgrad">evalfunc/ &amp; evalgrad/</a></li>
<li class="toctree-l3"><a class="reference internal" href="#system-preprocess">system &amp; preprocess</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#output">output/</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logs">logs/</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stats">stats/</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output-sf3-txt">output_sf3.txt</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="specfem2d_example.html">Specfem2D workstation example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How To</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="extending.html">Extending SeisFlows3</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_dev_plan.html">Code Development Plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SeisFlows3</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Working Directory Structure</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/working_directory.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="working-directory-structure">
<h1>Working Directory Structure<a class="headerlink" href="#working-directory-structure" title="Permalink to this headline"></a></h1>
<p>SeisFlows3 hardcodes it’s own working directory when executing a
workflow. Below we explore the working directory set up by the
SPECFEM2D-workstation example. Working directories may change slightly
depending on the chosen workflow, but will more or less follow the
following structure. The two specfem2d directories listed below are not
part of the SeisFlows3 working directory.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">cd</span> ~/Work/official/workshop_pyatoa_sf3/ex1_specfem2d_workstation
<span class="o">!</span> ls
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bchow</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">official</span><span class="o">/</span><span class="n">workshop_pyatoa_sf3</span><span class="o">/</span><span class="n">ex1_specfem2d_workstation</span>
<span class="n">logs</span>        <span class="n">output_sf3</span><span class="o">.</span><span class="n">txt</span>   <span class="n">scratch</span>            <span class="n">stats</span>
<span class="n">output</span>      <span class="n">parameters</span><span class="o">.</span><span class="n">yaml</span>  <span class="n">specfem2d_workdir</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="scratch">
<h2>scratch/<a class="headerlink" href="#scratch" title="Permalink to this headline"></a></h2>
<p>The active working directory of SeisFlows3 where all of the heavy
lifting takes place. Each module in the SeisFlows3 package may have it’s
own sub-directory where it stores temporary work data. Additionally, we
have two eval*/ directories where objective function evaluation
(evalfunc) and gradient evaluation (evalgrad) files are stored.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">evalfunc</span>  <span class="n">evalgrad</span>  <span class="n">optimize</span>  <span class="n">preprocess</span>  <span class="n">solver</span>  <span class="n">system</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As suggested by the name, the scratch/ directory is not for permanent storage, and any data contained within is liable to be changed or removed throughout the workflow. Permanent data storage takes place in the <strong>output/</strong> directory.</p>
</div>
<div class="section" id="solver">
<h3>solver/<a class="headerlink" href="#solver" title="Permalink to this headline"></a></h3>
<p>A collection of event-specific directories (one directory per event),
each of which is a self contained SPECFEM run directory (i.e., they
contain all the necessary files to run SPECFEM binaries within).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first (alphabetically) solver in this directory is symlinked as the <strong>mainsolver</strong>. The mainsolver is used to run single-process functions (e.g., gradient smoothing). The mainsolver is also useful for scripting, as the name of the first event may be different from workflow to workflow, so <strong>mainsolver</strong> provides a consistent entry point into the solver subdirectories.</p>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch/solver
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">001</span>  <span class="mi">002</span>  <span class="mi">003</span>  <span class="n">mainsolver</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch/solver/mainsolver
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span>  <span class="n">DATA</span>  <span class="n">kernel_paths</span>  <span class="n">mesher</span><span class="o">.</span><span class="n">log</span>  <span class="n">OUTPUT_FILES</span>  <span class="n">SEM</span>      <span class="n">solver</span><span class="o">.</span><span class="n">log</span>  <span class="n">traces</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Each solver directory is constructed by copying the <cite>PATH.SPECFEM_BIN</cite> and <cite>PATH.SPECFEM_DATA</cite> directories into each sub-directory. The user must ensure that these directories do not contain large files (e.g., waveform data, large tomography files), otherwise these will be copied N times, where N is the number of events in your workflow. This can quickly run up against storage issues.</p>
</div>
<p>The bin/, DATA/ and OUTPUT_FILES/ directories are the same as those
found in SPECFEM. The SEM file defines the locations of the adjoint
sources, which is dictated by SPECFEM. The traces/ directory contains
all of the output waveforms required by this event. They are separated
into observed (obs), synthetic (syn) and adjoint (adj) waveforms.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch/solver/mainsolver/traces
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adj</span>  <span class="n">obs</span>  <span class="n">syn</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch/solver/mainsolver/traces/obs
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AA</span><span class="o">.</span><span class="n">S0001</span><span class="o">.</span><span class="n">BXY</span><span class="o">.</span><span class="n">semd</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># These waveforms are saved into a two-column ASCII format</span>
<span class="o">!</span> tail scratch/solver/mainsolver/traces/obs/AA.S0001.BXY.semd
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">251.39999999999998</span>         <span class="o">-</span><span class="mf">1.1814422395268879E-005</span>
<span class="mf">251.45999999999998</span>         <span class="o">-</span><span class="mf">1.1800275583562581E-005</span>
<span class="mf">251.51999999999998</span>         <span class="o">-</span><span class="mf">1.1769315129746346E-005</span>
<span class="mf">251.57999999999998</span>         <span class="o">-</span><span class="mf">1.1721248953632887E-005</span>
<span class="mf">251.63999999999999</span>         <span class="o">-</span><span class="mf">1.1655830825336088E-005</span>
<span class="mf">251.69999999999999</span>         <span class="o">-</span><span class="mf">1.1572872866742356E-005</span>
<span class="mf">251.75999999999999</span>         <span class="o">-</span><span class="mf">1.1472248505521453E-005</span>
<span class="mf">251.81999999999999</span>         <span class="o">-</span><span class="mf">1.1353902449899163E-005</span>
<span class="mf">251.88000000000000</span>         <span class="o">-</span><span class="mf">1.1217847351013855E-005</span>
<span class="mf">251.94000000000000</span>         <span class="o">-</span><span class="mf">1.1064166223014224E-005</span>
</pre></div>
</div>
</div>
<div class="section" id="optimize">
<h3>optimize/<a class="headerlink" href="#optimize" title="Permalink to this headline"></a></h3>
<p>Values relating to the optimization algorithm. These variables define
model vectors, misfits, gradient directions and search directions.
Optimization vectors are stored as NumPy arrays and tagged with the .npy
suffix. Optimization scalars are stored as text files and tagged with
the .txt suffix.</p>
<p>Optimization Variable Names are described as:</p>
<ul class="simple">
<li><p>m_new: current model vector</p></li>
<li><p>m_old: previous model vector</p></li>
<li><p>m_try: line search model vector</p></li>
<li><p>f_new: current objective function value</p></li>
<li><p>f_old: previous objective function value</p></li>
<li><p>f_try: line search function value</p></li>
<li><p>g_new: current gradient direction vector</p></li>
<li><p>g_old: previous gradient direction vector</p></li>
<li><p>p_new: current search direction vector</p></li>
<li><p>p_old: previous search direction vector</p></li>
</ul>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch/optimize
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alpha</span><span class="o">.</span><span class="n">npy</span>  <span class="n">f_old</span><span class="o">.</span><span class="n">txt</span>  <span class="n">g_old</span><span class="o">.</span><span class="n">npy</span>  <span class="n">m_new</span><span class="o">.</span><span class="n">npy</span>  <span class="n">p_old</span><span class="o">.</span><span class="n">npy</span>
<span class="n">f_new</span><span class="o">.</span><span class="n">txt</span>  <span class="n">f_try</span><span class="o">.</span><span class="n">txt</span>  <span class="n">LBFGS</span>  <span class="n">m_old</span><span class="o">.</span><span class="n">npy</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">m_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;scratch/optimize/m_new.npy&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m_new</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mf">5800.</span>         <span class="mf">5800.</span>         <span class="mf">5800.</span>         <span class="o">...</span> <span class="mf">3499.77655379</span> <span class="mf">3499.9021825</span>
 <span class="mf">3499.99078301</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> cat scratch/optimize/f_new.txt
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">2.591424e-03</span>
</pre></div>
</div>
</div>
<div class="section" id="evalfunc-evalgrad">
<h3>evalfunc/ &amp; evalgrad/<a class="headerlink" href="#evalfunc-evalgrad" title="Permalink to this headline"></a></h3>
<p>Scratch directories containing objective function evaluation and
gradient evaluation files. These include (1) the current <strong>model</strong> being
used for misfit evaluation, and (2) <strong>residuals</strong> which define the
misfit for each event. <strong>evalgrad/</strong> also contains <strong>kernels</strong> which
define per-event kernels which are summed and manipulated with the
postprocess module.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch/evalfunc
<span class="o">!</span> echo
<span class="o">!</span> ls scratch/evalgrad
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span>  <span class="n">residuals</span>

<span class="n">kernels</span>  <span class="n">model</span>      <span class="n">residuals</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch/evalgrad/residuals
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">001</span>  <span class="mi">002</span>  <span class="mi">003</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> cat scratch/evalgrad/residuals/001
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">2.413801941841247842e-02</span>
<span class="mf">2.413801941841247842e-02</span>
<span class="mf">2.413801941841247842e-02</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch/evalgrad/kernels
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">001</span>  <span class="mi">002</span>  <span class="mi">003</span>  <span class="nb">sum</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch/evalgrad/kernels/sum
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">proc000000_vp_kernel</span><span class="o">.</span><span class="n">bin</span>  <span class="n">proc000000_vs_kernel</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
</div>
<div class="section" id="system-preprocess">
<h3>system &amp; preprocess<a class="headerlink" href="#system-preprocess" title="Permalink to this headline"></a></h3>
<p>These two directories are empty in our example problem, but are
catch-all directories where module-specific files can be output. If you
are extending SeisFlows3 with other base or subclasses, it is preferable
to adhere to this structure where each module only interacts with it’s
own directory</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls scratch/system
<span class="o">!</span> ls scratch/preprocess
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="output">
<h2>output/<a class="headerlink" href="#output" title="Permalink to this headline"></a></h2>
<p>The current active state of SeisFlows3, containing pickle (.p) and JSON
files which describe a Python environment of a current workflow.
Additionally files to be permanently saved (e.g., models, graidents,
traces) can be located here. These are tagged in ascending order, e.g.,
model_0001 refers to the updated model derived during the first
iteration.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls output
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gradient_0001</span>  <span class="n">seisflows_optimize</span><span class="o">.</span><span class="n">p</span>   <span class="n">seisflows_solver</span><span class="o">.</span><span class="n">p</span>
<span class="n">kwargs</span>             <span class="n">seisflows_parameters</span><span class="o">.</span><span class="n">json</span>  <span class="n">seisflows_system</span><span class="o">.</span><span class="n">p</span>
<span class="n">model_0001</span>     <span class="n">seisflows_paths</span><span class="o">.</span><span class="n">json</span>   <span class="n">seisflows_workflow</span><span class="o">.</span><span class="n">p</span>
<span class="n">model_init</span>     <span class="n">seisflows_postprocess</span><span class="o">.</span><span class="n">p</span>
<span class="n">model_true</span>     <span class="n">seisflows_preprocess</span><span class="o">.</span><span class="n">p</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls output/model_0001
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">proc000000_vp</span><span class="o">.</span><span class="n">bin</span>  <span class="n">proc000000_vs</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls output/gradient_0001
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">proc000000_vp_kernel</span><span class="o">.</span><span class="n">bin</span>  <span class="n">proc000000_vs_kernel</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="logs">
<h2>logs/<a class="headerlink" href="#logs" title="Permalink to this headline"></a></h2>
<p>Where any text logs are stored. If running on a cluster, all submitted
jobs will be instructed to write their logs into this directory.
Additionally, if a workflow is resumed (previous log files exist in the
other directory) copies are saved to this directory.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls logs
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output_sf3_001</span><span class="o">.</span><span class="n">txt</span>  <span class="n">parameters_001</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="stats">
<h2>stats/<a class="headerlink" href="#stats" title="Permalink to this headline"></a></h2>
<p>Text files describing the optimization statistics of the current
workflow. This directory is only relevant if you are running an
inversion workflow.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> ls stats
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">factor</span><span class="o">.</span><span class="n">txt</span>        <span class="n">line_search</span><span class="o">.</span><span class="n">txt</span>  <span class="n">slope</span><span class="o">.</span><span class="n">txt</span>        <span class="n">theta</span><span class="o">.</span><span class="n">txt</span>
<span class="n">gradient_norm_L1</span><span class="o">.</span><span class="n">txt</span>  <span class="n">misfit</span><span class="o">.</span><span class="n">txt</span>       <span class="n">step_count</span><span class="o">.</span><span class="n">txt</span>
<span class="n">gradient_norm_L2</span><span class="o">.</span><span class="n">txt</span>  <span class="n">restarted</span><span class="o">.</span><span class="n">txt</span>    <span class="n">step_length</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> cat stats/step_count.txt
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITER</span>          <span class="n">STEP_COUNT</span>
<span class="o">====</span>  <span class="o">==================</span>
   <span class="mi">1</span>        <span class="mf">0.000000E+00</span>
   <span class="mi">1</span>        <span class="mf">2.000000E+00</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="output-sf3-txt">
<h2>output_sf3.txt<a class="headerlink" href="#output-sf3-txt" title="Permalink to this headline"></a></h2>
<p>The main log file for SeisFlows3, where all log statements written to
stdout are recorded during a workflow.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> head -50 output_sf3.txt
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">35</span> <span class="o">|</span> <span class="n">initializing</span> <span class="n">SeisFlows3</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">39</span> <span class="o">|</span> <span class="n">copying</span> <span class="n">par</span><span class="o">/</span><span class="n">log</span> <span class="n">file</span> <span class="n">to</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bchow</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">official</span><span class="o">/</span><span class="n">workshop_pyatoa_sf3</span><span class="o">/</span><span class="n">ex1_specfem2d_workstation</span><span class="o">/</span><span class="n">logs</span><span class="o">/</span><span class="n">output_sf3_001</span><span class="o">.</span><span class="n">txt</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">39</span> <span class="o">|</span> <span class="n">copying</span> <span class="n">par</span><span class="o">/</span><span class="n">log</span> <span class="n">file</span> <span class="n">to</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bchow</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">official</span><span class="o">/</span><span class="n">workshop_pyatoa_sf3</span><span class="o">/</span><span class="n">ex1_specfem2d_workstation</span><span class="o">/</span><span class="n">logs</span><span class="o">/</span><span class="n">parameters_001</span><span class="o">.</span><span class="n">yaml</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">39</span> <span class="o">|</span> <span class="n">exporting</span> <span class="n">current</span> <span class="n">working</span> <span class="n">environment</span> <span class="n">to</span> <span class="n">disk</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">39</span> <span class="o">|</span>
<span class="o">////////////////////////////////////////////////////////////////////////////////</span>
                   <span class="n">WORKFLOW</span> <span class="n">WILL</span> <span class="n">STOP</span> <span class="n">AFTER</span> <span class="n">FUNC</span><span class="p">:</span> <span class="s1">&#39;finalize&#39;</span>
<span class="o">////////////////////////////////////////////////////////////////////////////////</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">39</span> <span class="o">|</span>
<span class="o">================================================================================</span>
                          <span class="n">STARTING</span> <span class="n">INVERSION</span> <span class="n">WORKFLOW</span>
<span class="o">================================================================================</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">39</span> <span class="o">|</span>
<span class="o">////////////////////////////////////////////////////////////////////////////////</span>
                                <span class="n">ITERATION</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">1</span>
<span class="o">////////////////////////////////////////////////////////////////////////////////</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">39</span> <span class="o">|</span>
<span class="o">////////////////////////////////////////////////////////////////////////////////</span>
                            <span class="n">PERFORMING</span> <span class="n">MODULE</span> <span class="n">SETUP</span>
<span class="o">////////////////////////////////////////////////////////////////////////////////</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">39</span> <span class="o">|</span> <span class="n">misfit</span> <span class="n">function</span> <span class="ow">is</span><span class="p">:</span> <span class="s1">&#39;waveform&#39;</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">40</span> <span class="o">|</span> <span class="n">writing</span> <span class="n">line</span> <span class="n">search</span> <span class="n">history</span> <span class="n">file</span><span class="p">:</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bchow</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">official</span><span class="o">/</span><span class="n">workshop_pyatoa_sf3</span><span class="o">/</span><span class="n">ex1_specfem2d_workstation</span><span class="o">/</span><span class="n">stats</span><span class="o">/</span><span class="n">line_search</span><span class="o">.</span><span class="n">txt</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">40</span> <span class="o">|</span> <span class="n">checking</span> <span class="n">poissons</span> <span class="n">ratio</span> <span class="k">for</span><span class="p">:</span> <span class="s1">&#39;m_new.npy&#39;</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">40</span> <span class="o">|</span> <span class="n">model</span> <span class="n">parameters</span> <span class="p">(</span><span class="n">m_new</span><span class="o">.</span><span class="n">npy</span> <span class="n">i01s00</span><span class="p">):</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">40</span> <span class="o">|</span> <span class="mf">5800.00</span> <span class="o">&lt;=</span> <span class="n">vp</span> <span class="o">&lt;=</span> <span class="mf">5800.00</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">40</span> <span class="o">|</span> <span class="mf">3500.00</span> <span class="o">&lt;=</span> <span class="n">vs</span> <span class="o">&lt;=</span> <span class="mf">3500.00</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">40</span> <span class="o">|</span> <span class="mf">0.21</span> <span class="o">&lt;=</span> <span class="n">pr</span> <span class="o">&lt;=</span> <span class="mf">0.21</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">41</span> <span class="o">|</span> <span class="n">setting</span> <span class="n">up</span> <span class="n">solver</span> <span class="n">on</span> <span class="n">system</span><span class="o">...</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">41</span> <span class="o">|</span> <span class="n">checkpointing</span> <span class="n">working</span> <span class="n">environment</span> <span class="n">to</span> <span class="n">disk</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">42</span> <span class="o">|</span> <span class="n">exporting</span> <span class="n">current</span> <span class="n">working</span> <span class="n">environment</span> <span class="n">to</span> <span class="n">disk</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">43</span> <span class="o">|</span> <span class="n">running</span> <span class="n">task</span> <span class="n">solver</span><span class="o">.</span><span class="n">setup</span> <span class="mi">3</span> <span class="n">times</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">43</span> <span class="o">|</span> <span class="n">initializing</span> <span class="mi">3</span> <span class="n">solver</span> <span class="n">directories</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">50</span> <span class="o">|</span> <span class="n">source</span> <span class="mi">001</span> <span class="n">symlinked</span> <span class="k">as</span> <span class="n">mainsolver</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">50</span> <span class="o">|</span> <span class="n">generating</span> <span class="s1">&#39;data&#39;</span> <span class="k">with</span> <span class="n">MODEL_TRUE</span> <span class="n">synthetics</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">57</span> <span class="o">|</span> <span class="n">running</span> <span class="n">mesh</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">MODEL_INIT</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">27</span> <span class="o">|</span>
<span class="o">================================================================================</span>
                             <span class="n">INITIALIZING</span> <span class="n">INVERSION</span>
<span class="o">================================================================================</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">27</span> <span class="o">|</span>
<span class="n">EVALUATE</span> <span class="n">OBJECTIVE</span> <span class="n">FUNCTION</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">27</span> <span class="o">|</span> <span class="n">saving</span> <span class="n">model</span> <span class="s1">&#39;m_new.npy&#39;</span> <span class="n">to</span><span class="p">:</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bchow</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">official</span><span class="o">/</span><span class="n">workshop_pyatoa_sf3</span><span class="o">/</span><span class="n">ex1_specfem2d_workstation</span><span class="o">/</span><span class="n">scratch</span><span class="o">/</span><span class="n">evalgrad</span><span class="o">/</span><span class="n">model</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">28</span> <span class="o">|</span> <span class="n">evaluating</span> <span class="n">objective</span> <span class="n">function</span> <span class="mi">3</span> <span class="n">times</span> <span class="n">on</span> <span class="n">system</span><span class="o">...</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">28</span> <span class="o">|</span> <span class="n">checkpointing</span> <span class="n">working</span> <span class="n">environment</span> <span class="n">to</span> <span class="n">disk</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">29</span> <span class="o">|</span> <span class="n">exporting</span> <span class="n">current</span> <span class="n">working</span> <span class="n">environment</span> <span class="n">to</span> <span class="n">disk</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">30</span> <span class="o">|</span> <span class="n">running</span> <span class="n">task</span> <span class="n">solver</span><span class="o">.</span><span class="n">eval_func</span> <span class="mi">3</span> <span class="n">times</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span> <span class="mi">16</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">30</span> <span class="o">|</span> <span class="n">running</span> <span class="n">forward</span> <span class="n">simulations</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="parameter_file.html" class="btn btn-neutral float-left" title="Parameter File" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="specfem2d_example.html" class="btn btn-neutral float-right" title="Specfem2D workstation example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, SeisFlows3 Development Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>